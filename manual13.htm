<html><body>
<h3>[13] IMPORTAR EXPORTAR </h3>

<p>Quando tiver terminado, exporte os dados da linha de trena e os croquis no seu formato predileto e transfira os arquivos exportaados para seu PC para terminar de desenhar seus mapas.</p>

<p>Por segurança, exporte um arquivo zip do TopoDroid e transfira-o para seu PC.
O arquivo zip é um backup completo de sua topo e contém todas as informações necessárias para restaurar os dados da topo em um banco de dados.
Você pode usá-lo para transferir a topo para o TopoDroid em outro aparelho Android.</p>

<p>Os dados da linha de trena e o arquivo zip são exportados a partir da tela <u>Info Topo</u>.
Os croquis são exportados a partir da tela <u>Desenhar</u> (um só croqui) e a partir da tela <u>Visão Geral</u> (todos os croquis de uma mesma visualização em um único arquivo).</p>

<p>Os arquivos zip do TopoDroid são armazenados no subdiretório <i>zip</i> abaixo do diretório <i>TopoDroid</i>.</p>

<p>Os arquivos com os dados da linha de trena e com os croquis são armazenados dentro do subdiretório <i>out</i> no diretório da topo.</p>

<p>A destinação das exportações de modelos 3D é escolhida através de um gerenciador de arquivos do sistema operacional.</p>

<h4>IMPORTAR TOPO</h4>

<p>O TopoDroid é capaz de importar dados de topo de um arquivo zip criado pelo próprio TopoDroid e também de arquivos em formatos externos.
Para importar arquivos em formatos externos ou arquivos zip, clique no botão <i>Importar</i> na tela <u>Principal</u>.
Os arquivos a serem importados serão selecionados através da interface do sistema.
Os nomes dos arquivos não podem incluir dois pontos (:).</p>

<p>Os seguintes formatos podem ser importados:</p>
<ul>
<li>Compass</li>
<li>Survex</li>
<li>Therion: somente dados da linha de trena.</li>
<li>VisualTopo</li>
<li>CaveSniper</li>
<li>PocketTopo: incluindo croquis</li>
<li>Arquivos zip do TopoDroid</li>
</ul>

<p>A importação de um arquivo falha se já houver uma topo com o mesmo nome no TopoDroid.</p>

<p>A importação de um arquivo zip falha se a versão do banco de dados for antiga demais ou mais velha do que a do TopoDroid atual.</p>

<p>Na importação de outros formatos, se tiverem dados EDTC, estes serão convertidos para medidas auxiliares apresentadas em verde.</p>

<p><b>Importação Therion</b></p>

<p>Somente arquivos Therion no modo de dados "normal" são aceitos para importação.</p>

<p>O comando "declination" é reconhecido.
Os valores de azimute lidos são corrigidos pela declinação.</p>

<p>O TopoDroid não importa croquis do Therion.</p>

<p><b>Importação PocketTopo</b></p>

<p>O TopoDroid importando tanto os dados da topo quanto os croquis.
As cores usadas PocketTopo são relacionadas a diferentes símbolos de desenho do TopoDroid (pontos e linhas).
Essa correlação cores PocketTopo X símbolos TopoDroid pode ser alterada via opções de configuração.</p>

<p><b>Importação Compass</b></p>

<p>O TopoDroid converte uma topo Cmpass do modo <i>normal</i> para o modo <i>mergulho [T] se a opção adequada estiver habilitada. [G].</i></p>

<p><b>Obs.</b>: A importação pode falhar (e dar pane no app) devido a algum erro no banco de dados que o TopoDroid não intercepte.
Se isso acontecer, apague a topo importada parcialmente e tente novamente a importaçcão.</p>

<h4>EXPORTAÇÃO DE DADOS DA TOPO</h4>

<p>O TopoDroid exporta os dados da topo para os seguintes softwares espeleológicos:</p>
<ul>
<li><a href="#compass">Compass</a></li>
<li><a href="#csurvey">cSurvey</a></li>
<li><a href="#ghtopo">GHTopo</a></li>
<li><a href="#grottolf">Grottolf</a></li>
<li><a href="#ptopo">PocketTopo</a></li>
<li><a href="#polygon">Polygon</a></li>
<li><a href="#survex">Survex</a></li>
<li><a href="#therion">Therion</a></li>
<li><a href="#topo">Topo</a></li>
<li><a href="#trobot">TopoRobot</a></li>
<li><a href="#vtopo">VisualTopo</a></li>
<li><a href="#walls">Walls</a></li>
<li><a href="#winkarst">WinKarst</a></li>
</ul>

<p>Além disso, exporta também os dados da topo nos seguintes formatos:</p>
<ul>
<li><a href="#csv">CSV</a></li>
<li><a href="#dxf">DXF</a></li>
<li><a href="#geojson">GeoJSON</a></li>
<li><a href="#kml">KML</a></li>
<li><a href="#plt">trackfile</a></li>
<li><a href="#shp">shapefile</a></li>
</ul>

<p>Se a topo não for georeferenciada, os dados da topo não poderão ser exportados nos últimos quatro formatos.</p>

<p>Pontos georeferenciados são exportados com coordenads lat/long em graus decimais e altitude acima do nível médio do mar [m].</p>

<p>Medidas auxiliares H e V são exportadas como medidas auxiliares comuns.</p>

<p><b id="compass">Compass</b> (.dat)</p>

<p>O formato de arquivos <i>Compass</i> é suportado tanto para importação como para exportação.</p>

<p>São suportados tanto o modo de daddos "normal" quanto o modo "mergulho".</p>

<p>As unidades dos dados lidos devem ser "pés" e "graus" que serão convertidos paraa "metros e "graus" no TopoDroid.</p>

<p>Configurações:</p>
<ul>
<li><u>Pref base</u>: se definido, será incluído no início do nome de cada base.</li>
<li><u>Aux Compass</u></li>
<li><u>Inverter Esq/Dir Compass</u></li>
</ul>

<p><b id="csurvey">cSurvey</b> (.csx)</p>

<p>Os arquivos cSurvey gerados pelo TopoDroid são compatíveis com a versão 1.20 e superiores do cSurvey.</p>

<p>A exportação de arquivos <i>cSurvey</i>a partir da tela <u>Info Topo</u> inclui somente os dados da topo e não os croquis.</p>

<p>Para exportar croquis (planta baixa e perfil) para o <i>cSurvey</i>, faça a exportaçcão na tela <u>Desenhar</u>.</p>

<p>A exportação <i>cSurvey</i> inclui as medidas de calibração e os arquivos de mídia (fotos e áudios).</p>

<p>Configurações:</p>
<ul>
<li><u>Pref base</u>: se definido, será incluído no início do nome de cada base.</li>
</ul>

<p><b id="survex">Survex</b> (.svx)</p>

<p>Os dados da topo podem ser exportados como arquivos <i>Survex</i>.</p>

<p>Os dados são exportados nas unidades definidas nas opções do usuário.</p>

<p>Configurações:</p>
<ul>
<li><u>Term linha Survex</u>: pode ser Linux ou Windows</li>
<li><u>Base aux Survex</u>: incluir às medidas auxiliares nos arquivos Survex exportados uma base PARA cujo nome é composto da base DE com uma letra adicionada.</li>
<li><u>EDTC Survex</u>: incluir EDTC nos arquivos Survex exportados.</li>
</ul>

<p><b id="therion">Therion</b> (.th)</p>

<p>Os dados da topo são exportados no formato <i>Therion</i> usando o modo "normal".</p>

<p>O nome da topo é usado como o nome da caverna no Therion com os "sublinhados" substituídos por espaços.</p>

<p>Os dados são exportados nas unidades definidas nas opções do usuário.</p>

<p>Os nomes dos integrantes da equipe são incluídos comentados.</p>

<p>A equipe definida no TopoDroid é repartida em comandos <i>team</i> do Therion.
Os nomes dos integrantes da equipe devem estar listados pelo último sobrenome eventualmente precedido de um nome/sequência de abreviações.
Por exemplo a equipe "A.W. Smith, B. Ford" será transformada em <i>team "A.W. Smith"</i> e <i>team "B. Ford"</i>.</p>

<p>Os comentários e marcações de tipo de bases precedem os dados da linha de trena.</p>

<p>Medidas auxiliares de cortes são exportadas com a base destino "-" (hífen).
As outras são exportadas com a base final "." (ponto).</p>

<p>Comentários são exportados como textos comentados (#).</p>

<p>No perfil retificado a sintaxe "extend &lt;flag&gt;" é utilizada antes de cada visada com o <i>flag</i> setado para "left", "right" ou "vert".
Para medidas auxiliares que não tenham direção no perfil retificado definida, o TopoDroid escreve "# extend auto" como um texto comentado pois este não é um comando Therion válido.</p>

<p>Projeções parciais no perfil retificado são suportadas no Therion a partir da versão 5.2.2 e são devidamente exportadas se a opção correspondente for habilitada.</p>

<p>As coordenadas geográficas (longitude, latitude e altitude) são exportadas como textos comentados.
Se o ponto usa coordenadas CRS personalizadas, elas também são incluídas precedidas do nome CRS correspondente.</p>

<p>Além disso, comandos "input" para cada arquivo th2 e as definições dos mapas para cada croqui são incluídos ao final como textos comentados.</p>

<p>Os arquivos <i>Therion</i> exportados incluem as medidas de verificação de calibração como textos comentados.</p>

<p>Configurações:</p>
<ul>
<li><u>Comando config Therion</u>: quando habilitada faz com que os dados da topo sejam envolvidos em um conjunto de comandos de configuração do Therion.</li>
<li><u>Mapa Therion início</u>: quando habilitada faz com que os comandos "map" sejam posicionados antes dos dados da linha de trena.</li>
<li><u>EDTC Survex/Therion</u>: inclui medidas auxiliares EDTC (esquerda/direita/teto/chão) nos arquivos exportados.</li>
<li><u>Comando config Therion</u>: faz com que o TopoDroid exporte um arquivo de configuração do Therion com os dados da linha de trena embutidos.
Este arquivo contém os comandos de configuração necessários para a criação de um PDF da planta baixa e outro do perfil retificado.
Rodando o Therion no arquio exportado produz um mapa PDF simples.
Os comandos "input" dos arquivos dos croquis permanecem comentados e devem ser ajsutados (descomentados) para ativar a leitura dos arquivos "th2" apropriados.</li>
</ul>

<p>A leitura de arquivos <i>Therion</i> pelo TopoDroid é bastante limitada.
Somente dados no formato "normal" são compreendidos.
Os comandos Therion "units", "flag", "extend", "mark" e "station" são reconhecidos.</p>

<p>Pontos com coordenadas geográficas ("fix") são lidos mas não são considerados pois o comando "cs" não é suportado.</p>

<p><b id="trobot">TopoRobot</b> (.trb)</p>

<p>Os dados da topo podem ser exportados no formato <i>TopoRobot</i>.
A política de nomeação de bases <i>TopoRobot</i> precisa ter sido selecionada.
Se os nomes das bases seguirem a convenção do TopoRobot "series.number", esses nomes serão usados.</p>

<p><b id="vtopo">VisualTopo</b> (.tro, .trox)</p>

<p>Arquivos no formato <i>VisualTopo</i> são suportados tanto para exportação como para importação.</p>

<p>Medidas auxiliares são incluídas se estiverem habilitadas.</p>

<p>Por padrão as medidas auxiliares EDTC são referenciadas às bases PARA mas esse comportamento pode ser alterado para que referenciem as bases DE.</p>

<p>As unidades de medida usadas são "metros" e "graus".</p>

<p>Configurações:</p>
<ul>
<li><u>Formato Trox</u>: por padrão os dados são gravados no formato "tro".</li>
<li><u>Aux VisualTopo</u>: define se medidas auxiliares serão incluídas.</li>
<li><u>EDTC em DE</u>: define se as medidas auxiliares serão referenciadas às bases DE ou PARA.</li>
</ul>

<p><b id="walls">Walls</b> (.srv)</p>

<p>Os dados da topo podem ser exportados no formato <i>Walls</i> (testado parcialmente).</p>

<p>As unidades de medidas são as definidas pelo usuário.</p>

<p>Se a opção "Aux Compass/Walls" estiver habilitada, as medidas auxiliares são exportadas como medidas "nomeadas".
Do contrário, são exportadas como "medidas anônimas" tendo seu comprimento ajustado para a projeção relevante.
O componente vertical dessas medidas pode ser recuperado através da inclinação.
Veja o manual do <i>Walls</i>.</p>

<p><b id="winkarst">WinKarst</b> (.sur)</p>

<p>Os dados da topo podem ser exportados no formato <i>WinKarst</i> (não testado).</p>

<p>Configurações:</p>
<ul>
<li><u>Pref base</u>: prefixo incluído nos nomes das bases na exportação.</li>
</ul>

<p><b id="ptopo">PocketTopo</b> (.top)</p>

<p>Arquivos no formato <i>PocketTopo</i> são suportados tanto para exportação como para importação.</p>

<p>Os arquivos PocketTopo exportados contém somente os dados da topo.</p>

<p>Se a política de nomeação de bases <i>TopoRobot</i> estiver selecionada e os nomes das bases seguir o padrão TopoRobot "series.number" esses nomes serão usados na exportação.
Se os nomes das bases seguirem a convenção do TopoRobot "series.number", esses nomes serão usados, do contrário os nomes das bases serão convertidos para números.
Letras são substituídas por dois dígitos cada.
Por exemplo, 'a' é substituído por '00', 'b' por '01' e assim sucessivamente, 'A' por '50', 'B' por '51' e assim por diante.
Todos os outros caracteres, não alfanuméricos são substituídos por '99'.</p>

<p>Os perfis "outline" e "profile" são importados.
O <i>PocketTopo</i> só utiliza algumas poucas cores para distinguir tipos de linhas, desta forma um <a href="page_pt_cmap.htm">mapeamento</a> de cores para tipos de linhas do TopoDroid é usado.
Esse mapeamento pode ser alterado através de opções de configuração.</p>

<p>Pode acontecer que o croqui importado não esteja alinhado com os dados da topo.
Nessa situação você pode arrastar o croqui na tela de <u>desenho</u> para que encaixe na linha de trena.</p>

<p><b id="polygon">Polygon</b> (.cave)</p>

<p>Os dados da topo podem ser exportados no formato <i>Polygon</i>.</p>

<p>Pontos com coordenadas geográficas são exportados como lat-long.</p>

<p><b id="ghtopo">GHTopo</b> (.gtx)</p>

<p>Os dados da topo podem ser exportados no formato <i>GHTopo</i> (testado parcialmente).</p>

<p><b id="grottolf">Grottolf</b> (.grt)</p>

<p>Os dados da topo podem ser exportados no formato <i>Grottolf</i> (não testado).</p>

<p>Se a primeira base tiver coordenadas geográficas, elas são exportadas, do contrário, são usadas coordenadas locais.
O perfil nas bases é calculado projetando as medidas auxiliares no plano vertical perpendicular à visada.</p>


<p><b id="topo">Topo</b> (.cav)</p>

<p>Os dados da topo podem ser exportados no formato <i>Topo</i>.</p>

<p>Configurações (em configurações "Survex"):</p>

<ul>
<li><u>Term linha Survex/Topo</u> pode ser Linux ou Windows.</li>
</ul>

<p><b id="csv">CSV</b> (.csv)</p>

<p>Os dados da topo podem ser exportados no formato <i>CSV</i> (campos separados por vírgulas):</p>

<ul>
<li>Bases DE e PARA</li>
<li>Distância, azimute e inclinação</li>
<li>direção no perfil retificado</li>
</ul>

<p>Os comentários das medidas não são exprotadas.
Um cabeçalho indicando o conteúdo de cada coluna é anexado aos dados.</p>

<p>Os dados brutos podem também ser exportados em formato CSV.
Nesse caso cada linha de dados é composta por:</p>

<ul>
<li>ID</li>
<li>Bases DE e PARA</li>
<li>Distância, azimute, inclinação e rotação</li>
<li>Aceleração, campo magnético e mergulho</li>
<li>Carimbo de horário, tipo (dispositivo ou manual) e endereço do dispositivo</li>
<li>Direção no perfil retificado, categoria, tipo, situação e comentário</li>
</ul>

<p>Na exportação de dados brutos as visadas não tem seus valores calculados (média), são exportados em formato original, individualmente. </p>

<p>Configurações:</p>

<ul>
<li><u>CSV bruto</u>: habilita a exportação de dados brutos em formato CSV</li>
<li><u>Separ campo CSV</u>: separador de campos nos arquivos CSV exportados (vírgula, traço vertical ou tab)</li>
<li><u>Separ linha CSV</u>: separador de linhas nos arquivos CSV exportados (Linux ou Windows)</li>
</ul>

<p><b id="dxf">DXF</b> (.dxf)</p>

<p>Os dados da topo podem ser exportados no formato 3D DXF <i>LibreCAD</i> com camada:</p>

<ul>
<li>bases</li>
<li>visadas</li>
<li>medidas auxiliares</li>
</ul>

<p>Os dados são exportados com correção relativa à declinação magnética.</p>

<p>Configurações:</p>

<ul>
<li><u>Final aux DXF</u>: medidas auxiliares exportadas com marcas em cruz na sua extremidade final</li>
</ul>

<p><b id="plt">PLT</b> (.plt)</p>

<p>Os dados da topo podem ser exportados como arquivo de trilha no formato <i>OziExplorer</i> se houver alguma base geoferenciada.</p>

<p>Se a topo tiver partes desconectadas entre si, o arquivo de trilhas exportado conterá todas as partes que contarem com alguma base georeferenciada.
Os dados são exportados com correção relativa à declinação magnética.</p>

<p><b id="kml">KML</b> (.kml)</p>

<p>Os dados da topo podem ser exportados como arquivo KML no formato <i>Keyhole Markup Language</i> se houver alguma base geoferenciada.</p>

<p>Se a topo tiver partes desconectadas entre si, o arquivo de trilhas exportado conterá todas as partes que contarem com alguma base georeferenciada.
Os dados são exportados com correção relativa à declinação magnética.</p>

<p>Configurações:</p>

<ul>
<li><u>Base KML/GeoJSON/SHP</u>: incluir bases no arquivo KML exportado</li>
<li><u>Aux KML/GeoJSON/SHP</u>: incluir medidas auxilares no arquivo KML exportado</li>
</ul>

<p><b id="geojson">GeoJSON</b> (.json)</p>

<p>Os dados da topo podem ser exportados como arquivo <i>GeoJSON</i> (conforme definido no <a href="https://www.rfc-editor.org/rfc/rfc7946">RFC 7946</a>) se houver alguma base geoferenciada.</p>

<p>Medidas são exportadas como <i>LineString</i> e bases como <i>Point</i>.</p>

<p>Se a topo tiver partes desconectadas entre si, o arquivo exportado conterá todas as partes que contarem com alguma base georeferenciada.
Os dados são exportados com correção relativa à declinação magnética.</p>

<p>Configurações:</p>

<ul>
<li><u>Base KML/GeoJSON/SHP</u>: incluir bases no arquivo GeoJSON exportado</li>
<li><u>Aux KML/GeoJSON/SHP</u>: incluir medidas auxilares no arquivo GeoJSON exportado</li>
</ul>

<p><b id="shp">Shapefile</b> (.shp .shx .dbf)</p>

<p>Os dados da topo podem ser exportados no formato <i>ShapeFile</i>.</p>

<p>É criado um shapefile para as bases e outro para as medidas (visadas e medidas auxiliares).
</p>

<p>Se a topo tiver partes desconectadas entre si, será criado um shapefile para cada partes que contar com alguma base georeferenciada.
Os dados são exportados com correção relativa à declinação magnética.</p>

<p>Cada shapefile é composto por três arquivos: dados (.shp), índice (.shx) e atributos (.dbf).
Os três arquivos são compactados no formato zip. O arquivo zip é gravado no diretório "shp" com a extensão ".shz".</p>

<p>Se houver ao menos uma base georeferenciada e a opção apropriada tiver sido amrcada na caixa de diálogo de exportação, os dados serão exportados no datum WGS84 e terão sido corrigidos em relação à declinação magnética local.
Do contrário os dados serão exportados no sistema local de coordenadas sem correção relativa à declinação magnética.</p>

<p>O arquivo DBF das bases contém somente o campo "nome".</p>

<p>O arquivo DBF das medidas contém os seguintes campos:</p>

<ul>
<li><i>type</i>: ou "leg" (visada) ou "splay" (medida auxiliar)</li>
<li><i>from</i>: base DE</li>
<li><i>to</i>: base PARA ("-" nas medidas auxiliares)</li>
<li><i>flag</i>: categoria da medida em formato hexadecimal:
  <ul>
    <li>1: superfície</li>
    <li>2: duplicada</li>
    <li>4: comentada</li>
  </ul>
</li>
<li><i>comment</i>: comentário</li>
</ul>

<p>Configurações:</p>

<ul>
<li><u>Base KML/GeoJSON/SHP</u>: incluir bases no arquivo shapefile exportado</li>
<li><u>Aux KML/GeoJSON/SHP</u>: incluir medidas auxilares no arquivo shapefile exportado</li>
</ul>

<h4>SKETCH EXPORT</h4>

TopoDroid exports survey sketches to the following formats:
<ul>
<li><a href="#csx">cSurvey</a></li>
<li><a href="#th2">Therion</a></li>
<li><a href="#tunnel">Tunnel</a></li>
<li><a href="#xvi">xtherion</a></li>
<li><a href="#cave3d">Cave3D</a></li>
<li><a href="#dxf2">DXF</a></li>
<!-- li><a href="#png">PNG image</a></li -->
<li><a href="#pdf">PDF file</a></li>
<li><a href="#shp2">shapefile</a></li>
<li><a href="#svg">SVG</a></li>
</ul>


<b id="csx">cSurvey</b> (.csx)<br>
The cSurvey export files require cSurvey v. 1.20 or later.<br>
These exports contain both the plan and profile sketches, as well as the survey data.
When "section" points are define the section drawings are added at the point.<br>

The cSurvey "cave" attribute is set with the survey name, and the "branch" attribute with the sketch name (without the suffix 'p' or 's').
The midline legs and splays and the sketch items share these attributes.<br><p>

If your survey has only one sketch this is a complete export of your work (except for the x-sections).
If the survey has more than one sketch, you must export each sketch individually and merge the exports with <i>cSurvey</i>.<br><p>

The sketch items are distributed on suitable <i>cSurvey</i> layers.<br><p>

Settings:<ul style="margin-top=0">
<li><u>station prefix</u> whether to add a prefix to the station names</li>
<li><u>point spacing</u> maximum distance between interpolating points on smooth lines</li>
</ul><p>

<b id="th2">Therion</b> (.th2)<br>
Sketches are exported in Therion format as one sketch per file, if exported from the <u>sketch window</u>,
or as a file containing all the sketches with the same view, plan or extended, if exported
from the <u>overview window</u>. In the latter there is a scrap for each sketch, and x-section scraps
are included if the automatic "section" points are enabled.
<br><p>

The Therion <i>scrap</i> names are composed of the survey name, the sketch name and a suffix, either 'p', for plan, or 's', for profile.<br>
For multi-scrap sketches the Therion <i>scrap</i> names of the scraps, beyond the first, are appended also a scrap number, beginning
with 1.<br>
X-section Therion <i>scrap</i> names are composed of the survey name, a two letter code, 'xx', and a number.<br><p>

When a sketch with section points is exported through the <u>export</u> dialog, the x-sections of the section points are
also exported.<br><p>

It the sketch contains symbols that are not included in the Therion set, you must prepend the
prefix "u:" to the unsupported symbol names, before using the th2 file.<br><p>

Settings:<ul style="margin-top=0">
<li>automatic <u>station-points</u>. [default: yes].</li>
<li>add <u>splays</u> to the scrap (as lines of type "splay") [default: no].</li>
<li>add a xtherion command to read the <u>XVI</u> image of the sketch [default: no].</li>
<li>export <u>scale</u>. Default 1:100</li>
<li><u>point spacing</u> minimum distance between points on polylines. Intermediate points are not exported. Default 20 cm</li>
</ul><p>

XVI images are not automatically exported with the Therion "th2" file, even if a xtherion command to include it is added to
the therion file, because it would not contain more information than the therion file.
The command can be used to load in xtherion an XVI image created by another program.
<br><p>

<!--
<u>Note</u>. With version 3.1 TopoDroid saves sketches "natively" in its binary format.<br>
Previous versions used Therion format.
The conversion from Therion to binary is "automatic" when you open a sketch: if TopoDroid does not find the binary file, it looks for the Therion file.<br>
From v. 4.1.2 TopoDroid does not load any more sketches in Therion format.<br>
-->

<b id="tunnel">Tunnel</b> (.xml)<br>
Sketch can be exported in Tunnel XML format. The files are saved in the "tnl" subdirectory.<br>
The following lines are mapped to Tunnel lines: wall, presumed, pit, chimney, and slope. 
All the other lines are mapped to Tunnel line "details".<br>
Area borders are mapped to Tunnel line "filled".<br>
The following points are mapped to Tunnel points: air-draught, archeo, blocks, clay, column, curtain, flowstone, gradient,
guano, mud, pebbles, popcorn, sand, soda-straw, stalactite, stalagmite, water, water-flow.
All the other points are mapped to Tunnel point "bedrock".<br>
<p>

<b id="xvi">Xtherion</b> (.xvi)<br>
The "xvi" export can be inserted as background image in xtherion.<br>
Lines of type "wall" are red, "slope" orange, "section" gray, all others are brown.
Area borders are black.
Point icons are rendered in a simplified way.
Label rendering supports only latin characters and digits and a few characters ('+', '-', '/', '_', '&gt;', '&lt;', '?').
Other characters are replaced by a "diamond".<br>
The grid cell are 1 m.
<br><p>

The XVI settings are among Therion settings:<ul style="margin-top=0">
<li>Drawing <u>section-point</u>: if section points are automatically added to section lines,
the section drawing is inserted in the xvi file, at the "section" point</li>
<li><u>grid</u> lines added to the export (cell size in the current grid units). Default no</li>
<li>export <u>scale</u>. Default 1:100</li>
</ul><p>

<b id="cave3d">Cave3D</b> (.c3d)<br>
Sketch exported in "c3d" format can be lifted in the 3D model inside the 3D viewer.<br>
<br><p>

<b id="dxf2">DXF</b> (.dxf)<br>
Sketches can be exported as 2D DXF files. You can assign layers to individual symbol types (point, line, area) or levels.
Use the Z coordinate to separate scraps or levels. The DXF file contains only a few basic line types.<br><p>

Sketches can be exported as DXF <i>9</i> AC1009, <i>12</i> (R13) AC1012, and <i>14</i> (R14) AC1014.
For DXF-9 areas are exported with only the border and are not colored inside.
<br><p>

It is possible to include in the DXF file, the x-sections (for which the sketch contains a "section" point),
and the X-Y axis.
<br><p>

Settings:<ul style="margin-top=0">
<li>DXF version: 9 (R12), 12 (R13), or 14 (R14). Default "9"</li>
<li><u>section-point</u>: if a section line has the relative section point,
the drawing of the section is inserted in the export, at the "section" point</li>
<li><u>XY reference</u>: whether to insert the XY axes reference</li>
<!-- li><u>stations</u>: whether to insert station points</li -->
<!-- li><u>interpolated curves</u>: whether to draw cubics as interpolated polylines</li -->
<!-- li><u>point spacing</u> maximum distance between interpolating points on smooth lines. Default 20 cm</li -->
<li>Scraps layer: DXF layers by scraps or type. Default "scraps"</li>  
</ul><p>

<!-- b id="png">PNG</b> (.png)<br>
Image file in PNG format is used only to export sketches.<br>
The setting "levels" affects PNG exports: the export includes only the visible items.<br><p>

Settings:<ul style="margin-top=0">
<li><u>image resolution</u> (1 means that 1 m = 40 pixels). The PNG resolution that fits therion th2 export is 5.0.
If the system does not have enough memory to create the image at the set resolution, TopoDroid uses a smaller resolution until the export succeeds (or it gets so small that the program gives up trying).</li>
<li><u>background color</u>: whether to set the background color white, temporarily.</li>
<li><u>grid</u>: whether to include or not</li>
<li><u>splays</u>: whether to include or not</li>
<li><u>stations</u>: whether to include or not</li>
</ul><p -->

<b id="pdf">PDF</b> (.pdf)<br>
Sketch can be exported as PDF files.
Sketch PDF files are meant to be a quick way to share the survey with non-surveyors
in a format that anyone can open.<br><p>

The PDF file has a single page with a white background, and
it includes only the reference items (stations, splays, grid, etc.) that are displayed on the screen.<br>
The text of labels, scalebar value and stations are reduced by 1/4.
The 1 m grid is not drawn at scales smaller than 1:100.
The color of certain items (eg, labels) is inverted, for visibility.<br><p>

<!--
Settings:<ul style="margin-top=0">
<li><u>background color</u>: whether to set the background color white, temporarily.</li>
<li><u>splays</u>: whether to include or not the splays [unused]</li>
</ul><p>
-->

<b id="shp2">Shapefile</b> (.shp)<br>
Sketches can be exported as shapefile, with stations, shots, and lines.
Each item has three files: the shape data file, the shape index file, and the database file.
The files comprising the shapefile export are zip-compressed and the zip file is saved in the
folder "shp" with extension ".shz".<br><p>

If you have georeferenced at least a station and checked the appropriate checkbox in the export dialog,
the data are exported in the WGS84 reference system, and corrected with the magnetic declination.<br>
Otherwise the data are exported in local coordinates and the magnetic declination correction is not applied.<br><p>

The "point" DBF contains the fields
<ul style="margin-top=0">
<li>point <i>name</i></li>
<li><i>orientation</i></li>
<li><i>level</i></li>
<li><i>scrap</i></li>
<li>optional <i>text</i> (truncated to 128 characters)</li>
</ul><br>

The "extra" DBF contains the fields
<ul style="margin-top=0">
<li>point <i>name</i></li>
<li><i>orientation</i></li>
<li><i>level</i></li>
<li><i>scrap</i></li>
<li>optional <i>text</i> (truncated to 128 characters)</li>
<li><i>file</i></li>
</ul><br>

The "line" and "area" DBF contain the fields
<ul style="margin-top=0">
<li><i>type</i> that distinguishes between line and area</li>
<li>line or area <i>name</i></li>
<li><i>level</i></li>
<li><i>scrap</i></li>
</ul><br>

The "station" DBF contains the fields
<ul style="margin-top=0">
<li><i>name</i> of the station</li>
</ul><br>

The "shot" DBF contains the fields
<ul style="margin-top=0">
<li><i>type</i>: either "leg" or "splay"</li>
<li><i>from</i> station</li>
<li><i>to</i> station ("-" for splays)</li>
<li>shot <i>flag</i> as hex: 1-surface, 2-duplicate, 4-commented</li>
</ul><br>


<b id="svg">SVG</b> (.svg)<br>
Sketches can be exported as SVG files.<br>
Items are organized in layers: <i>grids</i>, <i>stations</i>, <i>legs</i>, <i>splays</i>,
<i>points</i>, <i>lines</i>, and <i>areas</i>.<br>
These layers are under a global <i>canvas</i> layer.<br>
Each "scrap" has its  <i>points</i>, <i>lines</i>, and <i>areas</i> layers.<br>
<br><p>

The export scale is 1:100.
<br><p>

If splay classes are enabled, the splays are colored be the class: normal splay are gray,
horizontal are light sea-green, vertical light steel-blue, and xsection light sky blue.
Splay-classes are not supported in "round-trip" export.
<br><p>

Line effects, such as ticks in pit lines, are not exported, but the direction
can be shown enabling the "Line Direction" setting.<br><p>

Settings:<ul style="margin-top=0">
<li>SVG <u>program</u>: either Inkscape or Illustrator. This affect an export scale factor.</li>
<li>Drawing <u>section-point</u>: if section points are automatically added to section lines,
the section drawing is inserted in the export, at the "section" point</li>
<li>automatic <u>station-points</u>: if enabled all stations are included in the export,
otherwise only the user-chosen stations are included</li>
<li><u>point spacing</u> maximum distance between interpolating points on smooth lines</li>
<li><u>round-trip</u>: sketches are exported ready for Walls/Compass round-trip [no]</li>
<li><u>grid</u> lines added to the export (cell size in the current grid units) [no]</li>
<li><u>line direction</u> tick [no]</li> 
<li><u>lines width</u>: labels, icons, lines (and area borders), grid lines, shots, orientation stroke</li>
<li><u>station size</u>: station names text-size. Default 20</li>
</ul><p>



<h4>IMPORT/EXPORT SETTINGS</h4>
<ul style="margin-top=0">
<li><b>PocketTopo</b> <i>import color-map</i>: map of PocketTopo colors to sketch item types.</li> 
<li><i>Estimate LR extend</i>: on import of <b>Compass/VisualTopo</b> files [yes]</li>
<li><i>Data default-export</i>: default data export format to present in the export dialog [default none]</li>
<li><i>Sketch default-export</i>: default sketch export format to present in the export dialog [default none]</li>
<li><i>Sketch auto-export</i>. If set sketches are exported in the chosen format when they are closed. The exported files are stored in the "out" subfolder of the survey folder. Sketch auto-export puts an extra load on the app, and is not set by default.</li>
<li><b>Therion</b> <i>map commands</i> before or after the centerline block [after]</li>
<li><b>Therion</b> <i>auto-stations</i>: automatically add station points to the therion sketch file(s) [yes]. If you want to use the sketch files in therion they must have station points to define their scale. You can choose manually which point to add (by editing the sketch drawing), or let TopoDroid add the stations. The program will add all the stations that are "inside" the drawing (inside the drawing convex hull).</li>
<li><b>Therion</b> <i>splays</i> lines in Therion scraps [yes]</li>
<li><b>cSurvey</b> <i>survey prefix</i> to the stations [no]</li>
<li><b>Compass/TopoRobot/WinKarst/Polygon/VisualTopo</b>
  <ul>
  <li>minimum <i>splay-leg angle</i> for LRUD computation [0.0] This is also used in <b>Survex/Therion</b> if LRUD are required.</li>
  <li>minimum clino of splays used for up/down LRUD [0]</li>
  <li>maximum clino of splays used for left/right LRUD [90]</li>
  </ul>
</li>
<li><b>Compass swap LR</b>: Swap L and R on Compass export.</li>
<li><b>Survex/Topo</b> <i>line termination</i>: either Unix or Windows [Unix]</li>
<li><b>Survex</b> export with <i>named splay</i> TO stations [no]</li>
<li><b>Survex/Therion</b> export with <i>LRUD</i> lines [no]</li>
<li><b>SVG</b> target <i>program</i> [Inkscape]</li>
<li><b>SVG</b> export with <i>grid</i> [no]</li>
<li><b>SVG</b> export line orientation ticks [no]</li>
<li><b>SVG</b> stroke widths (labels, icons, lines, grids, shots, orientation ticks)</li>
<li><b>KML/GeoJSON</b> export with <i>stations</i> [yes]</li>
<li><b>KML/GeoJSON</b> export with <i>splays</i> [no]</li>
<!-- li><b>PNG</b> <i>resolution</i> [1.5]. It can be a number between 1 and 10. The higher the bigger the image (if you set it too high the system may not have enough memory to create the PNG).</li --> 
<!-- li><b>PNG</b> <i>background color</i>: you can set the background color of PNG images by specifying the RGB values (three integers between 0 and 255).</li -->
<li><b>DXF</b> sketch export <i>scale</i> [1.0]</li>
<li><b>DXF</b> export with <i>splay endpoints</i> [no]</li>
<li><i>DXF version</i> for the DXF export: either 6, 12, or 16. In version 6 DXF export bezier curves are replaced by polylines and areas do not have hatches. Version 12 and 16 DXF exports use splines and hatches, but they are still buggy.</li>
</ul>
<br><p>

<a href="page_finalmap.htm">The final map</a><br>
<a href="page_3d_export.htm">3D model export</a><br>
<a href="page_tdm_export.htm">Cave project export</a><br>
<a href="page_calib_import.htm">Calibrations</a> import/export<br>
<p>

<a href="manual12.htm">&lt; Overview window</a> |
<a href="manual14.htm">Cave Projects &gt;</a>

</body></html>
